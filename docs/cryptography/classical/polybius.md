---
sidebar_position: 7
---

import PolybiusCipher from '@site/src/components/ciphers/PolybiusCipher';

# Квадрат Полибия

**Квадрат Полибия** — один из древнейших шифров, преобразующий каждую букву в пару чисел (координаты в таблице).

## История

Изобретён греческим историком **Полибием** (около 200-118 до н.э.) для передачи сообщений с помощью факелов. Система позволяла передавать буквы на расстояние, показывая количество факелов для строки и столбца.

:::tip Историческая справка
Полибий описал этот метод в своей «Всеобщей истории» как способ военной сигнализации между башнями.
:::

## Принцип работы

### Построение квадрата

Алфавит размещается в таблице. Для русского алфавита (32 символа без Ё) используется таблица 6×6:

```
    1   2   3   4   5   6
  ┌───┬───┬───┬───┬───┬───┐
1 │ А │ Б │ В │ Г │ Д │ Е │
  ├───┼───┼───┼───┼───┼───┤
2 │ Ж │ З │ И │ Й │ К │ Л │
  ├───┼───┼───┼───┼───┼───┤
3 │ М │ Н │ О │ П │ Р │ С │
  ├───┼───┼───┼───┼───┼───┤
4 │ Т │ У │ Ф │ Х │ Ц │ Ч │
  ├───┼───┼───┼───┼───┼───┤
5 │ Ш │ Щ │ Ъ │ Ы │ Ь │ Э │
  ├───┼───┼───┼───┼───┼───┤
6 │ Ю │ Я │ - │   │   │   │
  └───┴───┴───┴───┴───┴───┘
```

### Английский вариант (5×5)

Для 26 букв английского алфавита используется таблица 5×5, где I и J объединяются:

```
    1   2   3   4   5
  ┌───┬───┬───┬───┬───┐
1 │ A │ B │ C │ D │ E │
  ├───┼───┼───┼───┼───┤
2 │ F │ G │ H │ I │ K │
  ├───┼───┼───┼───┼───┤
3 │ L │ M │ N │ O │ P │
  ├───┼───┼───┼───┼───┤
4 │ Q │ R │ S │ T │ U │
  ├───┼───┼───┼───┼───┤
5 │ V │ W │ X │ Y │ Z │
  └───┴───┴───┴───┴───┘
```

### Шифрование

Каждая буква заменяется на пару цифр: номер строки и номер столбца.

**Пример (русский):**
```
К → строка 2, столбец 5 → 25
Р → строка 3, столбец 5 → 35
И → строка 2, столбец 3 → 23
П → строка 3, столбец 4 → 34
Т → строка 4, столбец 1 → 41
О → строка 3, столбец 3 → 33

КРИПТО → 25 35 23 34 41 33
```

## Параметры

| Параметр | Значение |
|----------|----------|
| Тип | Фракционирующий шифр |
| Ключ | Порядок букв в квадрате |
| Выход | Числовой (пары цифр) |
| Основа | Для составных шифров |

## Интерактивный шифратор

<PolybiusCipher />

## Реализация на Python

```python
def create_polybius_square(alphabet: str, cols: int) -> list[list[str]]:
    """Создание квадрата Полибия"""
    square = []
    for i in range(0, len(alphabet), cols):
        square.append(list(alphabet[i:i + cols]))
    return square

def find_position(char: str, square: list[list[str]]) -> tuple[int, int] | None:
    """Поиск позиции символа в квадрате"""
    for row_idx, row in enumerate(square):
        for col_idx, c in enumerate(row):
            if c == char:
                return (row_idx + 1, col_idx + 1)
    return None

def polybius_encrypt(text: str, alphabet: str, cols: int) -> str:
    """Шифрование квадратом Полибия"""
    square = create_polybius_square(alphabet, cols)
    result = []
    
    for char in text.upper():
        # Замены
        if char == 'Ё': char = 'Е'
        if char == 'Й': char = 'И'
        if char == 'Ъ': char = 'Ь'
        if char == 'J': char = 'I'
        
        pos = find_position(char, square)
        if pos:
            result.append(f"{pos[0]}{pos[1]}")
        elif char == ' ':
            result.append(' ')
    
    return ' '.join(result)

def polybius_decrypt(cipher: str, alphabet: str, cols: int) -> str:
    """Дешифрование квадратом Полибия"""
    square = create_polybius_square(alphabet, cols)
    result = []
    
    # Парсим числа
    pairs = cipher.replace(' ', '').strip()
    for i in range(0, len(pairs), 2):
        if i + 1 < len(pairs):
            row = int(pairs[i]) - 1
            col = int(pairs[i + 1]) - 1
            if 0 <= row < len(square) and 0 <= col < len(square[0]):
                result.append(square[row][col])
    
    return ''.join(result)

# Русский алфавит 6x5 (30 букв)
RU_ALPHABET = 'АБВГДЕЖЗИКЛМНОПРСТУФХЦЧШЩЫЬЭЮЯ'

# Английский 5x5 (без J)
EN_ALPHABET = 'ABCDEFGHIKLMNOPQRSTUVWXYZ'

# Примеры
text = "КРИПТОГРАФИЯ"
encrypted = polybius_encrypt(text, RU_ALPHABET, 6)
decrypted = polybius_decrypt(encrypted, RU_ALPHABET, 6)

print(f"Исходный: {text}")
print(f"Зашифрованный: {encrypted}")
print(f"Расшифрованный: {decrypted}")
```

## Варианты и модификации

### С ключевым словом

Квадрат заполняется сначала буквами ключа (без повторов), затем оставшимися буквами алфавита:

```python
def create_keyed_square(keyword: str, alphabet: str, cols: int):
    """Квадрат с ключевым словом"""
    seen = set()
    chars = []
    
    # Сначала буквы ключа
    for char in keyword.upper():
        if char in alphabet and char not in seen:
            seen.add(char)
            chars.append(char)
    
    # Затем остальные
    for char in alphabet:
        if char not in seen:
            chars.append(char)
    
    return create_polybius_square(''.join(chars), cols)
```

### Бифид (шифр Делапорта)

Комбинация с перестановкой координат:

1. Записать все строки отдельно от столбцов
2. Объединить и читать парами
3. Преобразовать обратно в буквы

### Четырёхквадратный шифр

Использует 4 квадрата Полибия для биграммного шифрования.

## Криптоанализ

### Уязвимости

1. **Частотный анализ** — цифры сохраняют частоту букв
2. **Малое пространство** — всего 6 разных цифр
3. **Фиксированный квадрат** — легко восстановить

### Защита

- Использовать ключевое слово для перемешивания
- Комбинировать с другими шифрами (Бифид)
- Применять нелинейные преобразования

## Применение

Квадрат Полибия сам по себе слаб, но является **строительным блоком** для:

- Шифра Плейфера
- Шифра ADFGX/ADFGVX (Первая мировая война)
- Бифида и Трифида
- Четырёхквадратного шифра

:::info Современное использование
Сегодня используется в образовательных целях и CTF-соревнованиях.
:::
