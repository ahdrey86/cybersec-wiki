---
sidebar_position: 3
---

import SubnetCalculator from '@site/src/components/network/SubnetCalculator';

# IP-адресация и подсети

IP-адресация — система логической адресации устройств в сети.

## Калькулятор подсетей

<SubnetCalculator />

## IPv4

### Структура адреса

32-битный адрес, записывается в десятичном виде через точку:

```
192.168.1.100

В двоичном виде:
11000000.10101000.00000001.01100100
```

### Классы адресов (устаревшая классификация)

| Класс | Первые биты | Диапазон | Маска | Сетей | Хостов |
|-------|-------------|----------|-------|-------|--------|
| A | 0xxx | 1.0.0.0 — 126.255.255.255 | /8 | 128 | 16 млн |
| B | 10xx | 128.0.0.0 — 191.255.255.255 | /16 | 16384 | 65534 |
| C | 110x | 192.0.0.0 — 223.255.255.255 | /24 | 2 млн | 254 |
| D | 1110 | 224.0.0.0 — 239.255.255.255 | — | Multicast | — |
| E | 1111 | 240.0.0.0 — 255.255.255.255 | — | Reserved | — |

### Частные диапазоны (RFC 1918)

| Диапазон | CIDR | Класс | Количество адресов |
|----------|------|-------|-------------------|
| 10.0.0.0 — 10.255.255.255 | /8 | A | 16,777,216 |
| 172.16.0.0 — 172.31.255.255 | /12 | B | 1,048,576 |
| 192.168.0.0 — 192.168.255.255 | /16 | C | 65,536 |

### Специальные адреса

| Адрес | Назначение |
|-------|------------|
| 0.0.0.0 | Неопределённый адрес |
| 127.0.0.0/8 | Loopback (localhost) |
| 169.254.0.0/16 | Link-local (APIPA) |
| 255.255.255.255 | Широковещательный |

## CIDR (Classless Inter-Domain Routing)

Бесклассовая адресация заменила классовую:

```
192.168.1.0/24

/24 означает:
- 24 бита — сетевая часть
- 8 бит — хостовая часть
- Маска: 255.255.255.0
```

### Таблица масок

| CIDR | Маска | Хостов | Сетей /24 |
|------|-------|--------|-----------|
| /8 | 255.0.0.0 | 16,777,214 | 65,536 |
| /16 | 255.255.0.0 | 65,534 | 256 |
| /24 | 255.255.255.0 | 254 | 1 |
| /25 | 255.255.255.128 | 126 | 1/2 |
| /26 | 255.255.255.192 | 62 | 1/4 |
| /27 | 255.255.255.224 | 30 | 1/8 |
| /28 | 255.255.255.240 | 14 | 1/16 |
| /29 | 255.255.255.248 | 6 | 1/32 |
| /30 | 255.255.255.252 | 2 | 1/64 |
| /31 | 255.255.255.254 | 2* | P2P |
| /32 | 255.255.255.255 | 1 | Host |

**/31** — специальная маска для point-to-point линков (RFC 3021)

## Разбиение на подсети

### Пример: разбить 192.168.1.0/24 на 4 подсети

```
Нужно 4 подсети = 2² → заимствуем 2 бита из хостовой части
Новая маска: /24 + 2 = /26

Подсети:
1. 192.168.1.0/26   (0-63)    Хосты: .1 — .62
2. 192.168.1.64/26  (64-127)  Хосты: .65 — .126
3. 192.168.1.128/26 (128-191) Хосты: .129 — .190
4. 192.168.1.192/26 (192-255) Хосты: .193 — .254
```

### Формулы

```
Количество подсетей = 2^n (n — заимствованные биты)
Количество хостов = 2^m - 2 (m — оставшиеся биты)
```

## IPv6

### Структура

128-битный адрес в шестнадцатеричном виде:

```
2001:0db8:85a3:0000:0000:8a2e:0370:7334

Сокращённая запись:
2001:db8:85a3::8a2e:370:7334
```

### Типы адресов IPv6

| Тип | Префикс | Описание |
|-----|---------|----------|
| Global Unicast | 2000::/3 | Публичные адреса |
| Link-Local | fe80::/10 | Только в локальном сегменте |
| Unique Local | fc00::/7 | Аналог частных IPv4 |
| Multicast | ff00::/8 | Групповая рассылка |
| Loopback | ::1/128 | Локальная петля |

## NAT (Network Address Translation)

Преобразование адресов для выхода частных сетей в интернет.

### Типы NAT

| Тип | Описание |
|-----|----------|
| **Static NAT** | 1:1 — один внутренний = один внешний |
| **Dynamic NAT** | Пул внешних адресов |
| **PAT (NAPT)** | Один внешний IP, разные порты |

### Пример PAT

```
Внутренний:          Внешний:
192.168.1.10:5001 → 203.0.113.5:40001
192.168.1.11:5002 → 203.0.113.5:40002
192.168.1.12:80   → 203.0.113.5:40003
```

:::info Исчерпание IPv4
Адресное пространство IPv4 (~4.3 млрд) исчерпано. Решения:
- NAT (временное)
- IPv6 (340 ундециллионов адресов)
- CGNAT (Carrier-Grade NAT)
:::
