---
sidebar_position: 4
---

# Сетевое оборудование

Устройства для построения и работы сетей.

## Уровень 1 (Физический)

### Хаб (Hub)

- Повторяет сигнал на все порты
- Коллизии в общем домене
- **Устарел**, заменён коммутаторами

### Повторитель (Repeater)

- Усиливает и регенерирует сигнал
- Увеличивает дальность передачи

## Уровень 2 (Канальный)

### Коммутатор (Switch)

Интеллектуальная коммутация на основе MAC-адресов.

**Принцип работы:**
1. Изучение MAC-адресов (таблица коммутации)
2. Пересылка кадров только на нужный порт
3. Отдельный домен коллизий для каждого порта

**Типы коммутаторов:**

| Тип | Характеристики |
|-----|----------------|
| Неуправляемый | Plug-and-play, без настройки |
| Управляемый | VLAN, QoS, мониторинг |
| L3-коммутатор | Маршрутизация между VLAN |

**VLAN (Virtual LAN):**

```
VLAN 10: Бухгалтерия (порты 1-8)
VLAN 20: IT-отдел (порты 9-16)
VLAN 30: Гости (порты 17-24)
```

**Транк (Trunk):**
- 802.1Q — тегирование VLAN
- Передача нескольких VLAN по одному линку

### Мост (Bridge)

- Соединяет два сегмента сети
- Фильтрация по MAC-адресам
- Практически заменён коммутаторами

## Уровень 3 (Сетевой)

### Маршрутизатор (Router)

Пересылка пакетов между сетями на основе IP-адресов.

**Функции:**
- Маршрутизация (статическая/динамическая)
- NAT (Network Address Translation)
- Фильтрация (ACL)
- QoS

**Таблица маршрутизации:**

```bash
$ ip route
default via 192.168.1.1 dev eth0
192.168.1.0/24 dev eth0 proto kernel
10.0.0.0/8 via 192.168.1.254 dev eth0
```

**Протоколы маршрутизации:**

| Протокол | Тип | Применение |
|----------|-----|------------|
| RIP | Distance Vector | Малые сети |
| OSPF | Link State | Корпоративные |
| EIGRP | Hybrid | Cisco |
| BGP | Path Vector | Интернет, провайдеры |

### NAT (Network Address Translation)

```
Внутренняя сеть          NAT              Интернет
192.168.1.100:5000  →  203.0.113.1:40000  →  8.8.8.8:53
192.168.1.101:5001  →  203.0.113.1:40001  →  8.8.8.8:53
```

**Типы NAT:**
- **SNAT** — изменение source IP (выход в интернет)
- **DNAT** — изменение destination IP (проброс портов)
- **PAT** — Port Address Translation (много хостов через один IP)

## Безопасность

### Межсетевой экран (Firewall)

**Типы:**

| Тип | Уровень OSI | Возможности |
|-----|-------------|-------------|
| Пакетный фильтр | L3-L4 | IP, порты |
| Stateful | L3-L4 | Состояние соединений |
| Application (WAF) | L7 | HTTP, SQL injection |
| NGFW | L3-L7 | IPS, DPI, антивирус |

**Пример правил iptables:**

```bash
# Разрешить SSH
iptables -A INPUT -p tcp --dport 22 -j ACCEPT

# Разрешить established
iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT

# Запретить остальное
iptables -A INPUT -j DROP
```

### IDS/IPS

| Система | Функция |
|---------|---------|
| IDS | Обнаружение вторжений (alert) |
| IPS | Предотвращение вторжений (block) |

**Примеры:** Snort, Suricata, OSSEC

### Прокси-сервер

- Посредник между клиентом и сервером
- Кэширование, фильтрация, анонимизация

**Примеры:** Squid, HAProxy, Nginx
